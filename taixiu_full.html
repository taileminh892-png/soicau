<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Tool Soi Cáº§u TÃ i Xá»‰u</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
body{margin:0;background:#0f172a;color:white;font-family:sans-serif}
.box{padding:15px}
input,button{width:100%;padding:10px;margin:6px 0;border-radius:10px;border:none}
button{background:#22c55e;font-weight:bold}
.card{background:#020617;padding:12px;border-radius:12px;margin-top:10px}
.streak{font-size:34px;font-weight:900;text-align:center;margin:10px 0}
.T{color:#22c55e}
.X{color:#ef4444}

/* bubble */
#bubble{
 position:fixed;right:20px;bottom:120px;
 width:55px;height:55px;border-radius:50%;
 background:#22c55e;color:black;
 display:flex;align-items:center;justify-content:center;
 font-size:22px;font-weight:bold;
 z-index:99999;cursor:pointer;box-shadow:0 0 15px #000;
}

/* panel */
#panel{
 position:fixed;right:20px;bottom:190px;
 width:260px;background:#020617;color:white;
 border-radius:14px;padding:12px;
 z-index:99999;box-shadow:0 0 20px #000;
 display:none;
}

#menu button{
 background:#1f2933;color:white;
}

.tab{display:none}
</style>
</head>

<body>

<div id="bubble">ğŸ§°</div>

<div id="panel">

<div id="menu">
 <button onclick="showTab('soiTab')">ğŸ² Soi Cáº§u</button>
 <button onclick="showTab('bankTab')">ğŸ’° Quáº£n LÃ½ Vá»‘n</button>
 <button onclick="showTab('chartTab')">ğŸ“Š Biá»ƒu Äá»“</button>
</div>

<hr>

<div id="soiTab" class="tab">
 <input id="cau" placeholder="Nháº­p: TTXTXTXXT">
 <button onclick="soi()">SOI</button>
 <div id="streak" class="streak">ğŸ”¥ --</div>
 <div class="card" id="result"></div>
 <div class="card" id="goiy"></div>
</div>

<div id="bankTab" class="tab">
 <input id="bankInput" type="number" placeholder="Vá»‘n ban Ä‘áº§u">
 <input id="betInput" type="number" placeholder="% cÆ°á»£c má»—i tay">
 <button onclick="initBank()">Khá»Ÿi táº¡o</button>
 <div class="card" id="bankBox">Vá»‘n: --</div>
 <button onclick="win()">âœ… Tháº¯ng</button>
 <button onclick="lose()">âŒ Thua</button>
</div>

<div id="chartTab" class="tab">
 <canvas id="chart"></canvas>
</div>

</div>

<script>
let chart;
let bank=0,startBank=0,betPercent=2;

bubble.onclick=()=>panel.style.display=
 panel.style.display=="none"?"block":"none";

function showTab(id){
 document.querySelectorAll(".tab").forEach(t=>t.style.display="none");
 document.getElementById(id).style.display="block";
}

showTab("soiTab");

function soi(){
 let d=cau.value.toUpperCase().replace(/\s/g,'');
 if(!d) return alert("Nháº­p T hoáº·c X");

 for(let c of d){
  if(c!="T"&&c!="X") return alert("Chá»‰ nháº­p T hoáº·c X");
 }

 let t=(d.match(/T/g)||[]).length;
 let x=(d.match(/X/g)||[]).length;

 result.innerText=`TÃ€I: ${(t/d.length*100).toFixed(1)}% | Xá»ˆU: ${(x/d.length*100).toFixed(1)}%`;
 goiy.innerText=t>x?"ğŸ‘‰ NghiÃªng TÃ€I":x>t?"ğŸ‘‰ NghiÃªng Xá»ˆU":"ğŸ‘‰ CÃ¢n báº±ng";

 let s=1;
 for(let i=d.length-1;i>0;i--){
  if(d[i]==d[i-1]) s++;
  else break;
 }

 let last=d[d.length-1];
 streak.className="streak "+last;
 streak.innerText=`ğŸ”¥ ${last} x ${s}`;

 drawChart(d);
}

function drawChart(d){
 let y=[],labels=[],colors=[];
 for(let i=0;i<d.length;i++){
  labels.push(i+1);
  if(d[i]=="T"){y.push(1);colors.push("#22c55e")}
  else{y.push(0);colors.push("#ef4444")}
 }

 if(chart) chart.destroy();
 chart=new Chart(document.getElementById("chart"),{
  type:"line",
  data:{labels,datasets:[{data:y,pointBackgroundColor:colors,pointRadius:5,borderColor:"#94a3b8"}]},
  options:{plugins:{legend:{display:false}},
   scales:{y:{min:-.2,max:1.2,ticks:{callback:v=>v==1?"T":"X"}}}}
 });
}

function initBank(){
 startBank=Number(bankInput.value);
 betPercent=Number(betInput.value);
 if(!startBank||!betPercent) return alert("Nháº­p Ä‘á»§ vá»‘n");
 bank=startBank;
 updateBank();
}

function bet(){return Math.floor(bank*betPercent/100);}

function win(){bank+=bet();updateBank();}
function lose(){bank-=bet();updateBank();}

function updateBank(){
 bankBox.innerText="Vá»‘n: "+bank.toLocaleString()+" | CÆ°á»£c: "+bet().toLocaleString();
}
</script>

</body>
</html>
